<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar Novo Mapa - Keeper of Realms Forge</title>
    <link rel="stylesheet" href="forms_static.css"> <!-- CSS para formulários -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Script para incluir os componentes (topbar e sidebar) -->
    <script src="./include-all-components.js"></script>
</head>
<body>
    <div class="page-container"> <!-- Container para o conteúdo principal -->
        <main class="form-container">
            <h1>Criar Novo Mapa</h1> <!-- Título movido para dentro do main -->
        <form id="create-map-form">
            <div class="form-section">
                <h2>Informações do Mapa</h2>
                <div class="form-group">
                    <label for="map-title">Título do Mapa:</label>
                    <input type="text" id="map-title" name="map-title" required>
                </div>
                <div class="form-group">
                    <label for="map-description">Descrição do Mapa:</label>
                    <textarea id="map-description" name="map-description" rows="4" placeholder="Descreva o mapa, seus principais locais ou pontos de interesse."></textarea>
                </div>
            </div>

            <div class="form-section">
                <h2>Imagem do Mapa</h2>
                <div class="form-group">
                    <label for="map-image-upload">Upload da Imagem do Mapa:</label>
                    <input type="file" id="map-image-upload" name="map-image-upload" accept="image/*" required>
                    <p style="font-size: 0.8em; color: #aaa;">Faça o upload da imagem principal do seu mapa.</p>
                </div>
                <div class="form-group">
                    <label for="map-image-url">Ou URL da Imagem do Mapa:</label>
                    <input type="text" id="map-image-url" name="map-image-url" placeholder="Cole a URL da imagem do mapa aqui">
                </div>
            </div>
            
            <div class="form-section">
                <h2>Marcadores e Legendas (Opcional)</h2>
                <div class="form-group">
                    <label for="map-markers">Marcadores/Legendas:</label>
                    <textarea id="map-markers" name="map-markers" rows="5" placeholder="Adicione notas sobre marcadores importantes no mapa. Ex: Ponto 1 - Castelo do Rei, Ponto 2 - Floresta Assombrada."></textarea>
                    <p style="font-size: 0.8em; color: #aaa;">Foco simples para início, melhorias futuras permitirão adicionar marcadores interativos.</p>
                </div>
            </div>

            <button type="submit" class="btn-submit">Salvar Mapa</button>
        </form>
    </main>
    </div> <!-- Fecha page-container -->
    <footer>
        <p>&copy; 2024 Keeper of Realms Forge. Todos os direitos reservados.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        // const SUPABASE_URL = 'SEU_SUPABASE_URL';
        // const SUPABASE_ANON_KEY = 'SEU_SUPABASE_ANON_KEY';
        // const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // document.getElementById('create-map-form').addEventListener('submit', async function(event) {
        //     event.preventDefault();
        //     const formData = new FormData(this);
        //     const mapData = {};
        //     formData.forEach((value, key) => mapData[key] = value);

        //     // Lógica para lidar com upload de arquivo ou URL
        //     // const imageFile = formData.get('map-image-upload');
        //     // if (imageFile && imageFile.size > 0) {
        //     //     // Lógica de upload para Supabase Storage
        //     //     // const { data: uploadData, error: uploadError } = await supabase.storage
        //     //     //     .from('maps') // Nome do seu bucket
        //     //     //     .upload(`public/${imageFile.name}`, imageFile);
        //     //     // if (uploadError) throw uploadError;
        //     //     // mapData.image_url = supabase.storage.from('maps').getPublicUrl(`public/${imageFile.name}`).data.publicUrl;
        //     // } else if (mapData['map-image-url']) {
        //     //     mapData.image_url = mapData['map-image-url'];
        //     // }
        //     // delete mapData['map-image-upload'];
        //     // delete mapData['map-image-url'];

        //     // const { data, error } = await supabase
        //     //     .from('maps') // Substitua 'maps' pelo nome da sua tabela
        //     //     .insert([mapData]);

        //     // if (error) {
        //     //     console.error('Erro ao salvar mapa:', error);
        //     //     alert('Erro ao salvar mapa.');
        //     // } else {
        //     //     console.log('Mapa salvo:', data);
        //     //     alert('Mapa salvo com sucesso!');
        //     // }
        // });
    </script>
</body>
</html>